(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(3),r=t(2),s=t(14),u=t.n(s),i=t(4),a=t.n(i),l="/api/persons",d=function(){return a.a.get(l).then((function(e){return e.data}))},f=function(e){return a.a.post(l,e).then((function(e){return e.data}))},j=function(e,n){return a.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return a.a.delete("".concat(l,"/").concat(e)).then((function(e){return console.log(e)}))},h=function(e){var n=e.persons,t=e.setPersons;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Numbers"}),Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.phone,Object(c.jsx)("button",{onClick:function(){return function(e){window.confirm("Do you really want to delete ".concat(e.name,"?"))&&b(e.id).then((function(c){console.log(c),t(n.filter((function(n){return n.id!==e.id})))}))}(e)},children:" delete "})]},e.id)}))})]})},p=(t(38),function(e){var n=e.message,t=e.notifType;return null===n?null:Object(c.jsx)("div",{className:t,children:n})}),O=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],s=n[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),a=i[0],l=i[1],b=Object(r.useState)(""),O=Object(o.a)(b,2),m=O[0],x=O[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),y=g[0],w=g[1],k=Object(r.useState)({message:null,notifType:"success"}),T=Object(o.a)(k,2),C=T[0],S=T[1],P=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));Object(r.useEffect)((function(){d().then((function(e){s(e)}))}),[t]);var F=function(e){return function(n){e(n.target.value)}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p,{message:C.message,notifType:C.notifType}),Object(c.jsxs)("div",{children:["Filter",Object(c.jsx)("input",{value:a,onChange:F((function(e){l(e)}))})]}),Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:m,phone:y},c=function(e,n){S({message:e,notifType:n}),setTimeout((function(){S({message:null,notifType:"success"})}),5e3)};if(""===m||""===y)alert("A required field is empty.");else if(t.some((function(e){return e.name===m}))){if(window.confirm("".concat(m," is already added to the book, replace the old number with a new one?"))){var o=t.find((function(e){return e.name===m}));j(o.id,n).then((function(e){s(t.map((function(n){return n.id!==o.id?n:e}))),x(""),w(""),c("".concat(m," has been updated successfully"),"success")})).catch((function(e){c(e.response.data.error,"error")}))}}else f(n).then((function(e){s(t.concat(e)),x(""),w(""),c("".concat(m," has been added successfully"),"success")})).catch((function(e){return c(e.response.data.error,"error")}))},children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:m,onChange:F(x)})]}),Object(c.jsxs)("div",{children:["Phone: ",Object(c.jsx)("input",{value:y,onChange:F(w)})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]}),Object(c.jsx)(h,{persons:P,setPersons:s})]})};u.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.20a1c5b8.chunk.js.map