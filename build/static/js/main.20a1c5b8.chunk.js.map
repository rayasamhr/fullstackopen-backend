{"version":3,"sources":["services/persons.js","components/Numbers.js","index.js"],"names":["baseURL","axios","get","then","response","data","obj","post","id","newObj","put","delete","console","log","Numbers","persons","setPersons","map","person","name","phone","onClick","window","confirm","PersonService","filter","promptToDelete","Notification","message","notifType","className","App","useState","filterValue","setFilterValue","newName","setNewName","newPhone","setNewPhone","notif","setNotif","filteredPersons","toLowerCase","includes","useEffect","handleChange","func","event","target","value","onChange","val","onSubmit","preventDefault","personObject","createNotif","setTimeout","alert","some","p","find","catch","err","error","concat","type","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.20a1c5b8.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseURL = '/api/persons';\n\nconst getAll = () => axios.get(baseURL)\n        .then(response => response.data);\n\nconst createPerson = (obj) => axios.post(baseURL, obj)\n        .then(response => response.data)\n\nconst updatePerson = (id, newObj) => axios.put(`${baseURL}/${id}`, newObj)\n        .then(response => response.data)\n\nconst deletePerson = (id) => axios.delete(`${baseURL}/${id}`)\n        .then(response => console.log(response))\n\nexport default {\n    getAll,\n    createPerson,\n    updatePerson,\n    deletePerson\n}","import React from 'react'\nimport PersonService from '../services/persons';\n\nconst Numbers = ({ persons, setPersons }) => {\n\n    const promptToDelete = person => {\n        if (window.confirm(`Do you really want to delete ${person.name}?`)) {\n            PersonService.deletePerson(person.id)\n                .then(data => {\n                    console.log(data)\n                    setPersons(persons.filter(obj => obj.id !== person.id))\n                })\n        }\n    } \n\n    return (\n        <>\n            <h1>Numbers</h1>\n            <ul>\n                {persons.map(person =>\n                    <li key={person.id}>\n                        {person.name} {person.phone}\n                        <button onClick={() => promptToDelete(person)}> delete </button>\n                    </li>)}\n            </ul>\n        </>\n    )\n}\n\nexport default Numbers","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport Numbers from './components/Numbers';\nimport PersonService from './services/persons';\nimport './index.css';\n\nconst Notification = ({message, notifType}) => {\n  if (message === null) {\n    return null;\n  }\n  return(\n    <div className={notifType}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  //State hooks\n  const [persons, setPersons] = useState([])\n  const [filterValue, setFilterValue] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newPhone, setNewPhone] = useState('')\n  const [notif, setNotif] = useState({\n    message: null,\n    notifType: \"success\"\n  })\n\n  const filteredPersons = persons.filter(person => \n    person.name.toLowerCase().includes(filterValue.toLowerCase()));\n\n  useEffect(() => {\n    PersonService.getAll()\n      .then(data => {\n        setPersons(data);\n      })\n  }, [persons])\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const personObject = {\n      name: newName,\n      phone: newPhone\n    }\n\n    const createNotif = (message, notifType) => {\n      setNotif({message, notifType})\n            setTimeout(() => {\n              setNotif({message: null, notifType:\"success\"})\n            }, 5000)\n    }\n\n    if (newName === '' || newPhone === '') {\n      alert('A required field is empty.')\n    } else if (persons.some(person => person.name === newName)) {\n      if (window.confirm(`${newName} is already added to the book, replace the old number with a new one?`)) {\n        const p = persons.find(person => person.name === newName);\n        PersonService.updatePerson(p.id, personObject)\n          .then(data => {\n            setPersons(persons.map(person => person.id !== p.id ? person : data))\n            setNewName('');\n            setNewPhone('');\n            createNotif(`${newName} has been updated successfully`, \"success\");\n          }).catch(err => {\n            createNotif(err.response.data.error, \"error\");\n          })\n      }\n    } else {\n      PersonService.createPerson(personObject)\n        .then(data => {\n          setPersons(persons.concat(data))\n          setNewName('');\n          setNewPhone('');\n          createNotif(`${newName} has been added successfully`, \"success\");\n        }).catch(err => createNotif(err.response.data.error, \"error\"))\n    }\n  }\n\n  const handleChange = (func) => (event) => {\n    func(event.target.value);\n  }\n\n  const filter = val => {\n    setFilterValue(val);\n  }\n\n  return (\n    <>\n      <Notification message={notif.message} notifType={notif.notifType} />\n      <div>\n        Filter\n        <input value={filterValue} onChange={handleChange(filter)} />\n      </div>\n      <h1>Phonebook</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          Name: <input value={newName} onChange={handleChange(setNewName)} />\n        </div>\n        <div>\n          Phone: <input value={newPhone} onChange={handleChange(setNewPhone)} />\n        </div>\n        <div>\n          <button type=\"submit\">\n            add\n          </button>\n        </div>\n      </form>\n      <Numbers persons={filteredPersons} setPersons={setPersons} />\n    </>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}