(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(3),s=t(2),u=t(14),i=t.n(u),r=t(4),a=t.n(r),l="/api/persons",f=function(){return a.a.get(l).then((function(e){return e.data}))},d=function(e){return a.a.post(l,e).then((function(e){return e.data}))},j=function(e,n){return a.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return a.a.delete("".concat(l,"/").concat(e)).then((function(e){return console.log(e)}))},h=function(e){var n=e.persons,t=e.setPersons;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:"Numbers"}),Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsxs)("li",{children:[e.name," ",e.phone,Object(c.jsx)("button",{onClick:function(){return function(e){window.confirm("Do you really want to delete ".concat(e.name,"?"))&&b(e.id).then((function(c){console.log(c),t(n.filter((function(n){return n.id!==e.id})))}))}(e)},children:" delete "})]},e.id)}))})]})},m=(t(38),function(e){var n=e.message,t=e.notifType;return null===n?null:Object(c.jsx)("div",{className:t,children:n})}),p=function(){var e=Object(s.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],i=Object(s.useState)(""),r=Object(o.a)(i,2),a=r[0],l=r[1],b=Object(s.useState)(""),p=Object(o.a)(b,2),O=p[0],g=p[1],x=Object(s.useState)(""),v=Object(o.a)(x,2),y=v[0],T=v[1],w=Object(s.useState)({message:null,notifType:"success"}),k=Object(o.a)(w,2),C=k[0],S=k[1],P=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));Object(s.useEffect)((function(){f().then((function(e){u(e)}))}),[t]);var F=function(e){return function(n){e(n.target.value)}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m,{message:C.message,notifType:C.notifType}),Object(c.jsxs)("div",{children:["Filter",Object(c.jsx)("input",{value:a,onChange:F((function(e){l(e)}))})]}),Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:O,phone:y};if(""===O||""===y)alert("A required field is empty.");else if(t.some((function(e){return e.name===O}))){if(window.confirm("".concat(O," is already added to the book, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===O}));j(c.id,n).then((function(e){u(t.map((function(n){return n.id!==c.id?n:e}))),g(""),T(""),S({message:"".concat(O," has been updated successfully"),notifType:"success"}),setTimeout((function(){S({message:null,notifType:"success"})}),5e3)})).catch((function(e){console.log(e),S({message:"".concat(O," has already been removed from the server"),notifType:"error"}),setTimeout((function(){S({message:null,notifType:"success"})}),5e3)}))}}else d(n).then((function(e){u(t.concat(e)),g(""),T(""),S({message:"".concat(O," has been added successfully"),notifType:"success"}),setTimeout((function(){S({message:null,notifType:"success"})}),5e3)})).catch((function(e){return console.log(e)}))},children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:O,onChange:F(g)})]}),Object(c.jsxs)("div",{children:["Phone: ",Object(c.jsx)("input",{value:y,onChange:F(T)})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]}),Object(c.jsx)(h,{persons:P,setPersons:u})]})};i.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cfbc1d2a.chunk.js.map